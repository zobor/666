import{c as r}from"./index.563d4b32.js";import{r as C,C as T,a,g as y,f as F,j as h}from"./index.68457cfe.js";const v={},j=({data:s})=>{var m;if(!((m=s==null?void 0:s.list)!=null&&m.length))return;s.list.map(e=>{v[e.time]=e.close});const d=s.list.map(e=>e.close).reverse(),o=y(d),{macd:D,dif:b,dea:x}=o,N=Math.max.apply(null,d),w=Math.min.apply(null,d);let c=[];const t=3;D.map((e,l)=>{if(s.list[l].time==="09:30")return;const n=s.list[l].time,i=v[n];c.push({macd:Number(e.toFixed(t)),dif:Number(b[l].toFixed(t)),dea:Number(x[l].toFixed(t)),time:n,close:i})}),c.map((e,l)=>{const n=c[l+1];if(n){e.dif<=n.dif?e.difDirection="down":e.difDirection="up",e.dea<=n.dea?e.deaDirection="down":e.deaDirection="up";const i=c.slice(l+1).map(p=>p.close),f=i.reduce((p,P)=>p+P)/i.length;e.avaPrice=Number(f.toFixed(2)),e.avaDiff=F((e.close-f)/f)}}),c=c.filter(e=>e.avaPrice);const u=c.map(e=>e.dif),M=Math.max.apply(null,u),g=Math.min.apply(null,u);return h("table",{className:"list",children:[a("thead",{children:h("tr",{children:[a("td",{children:"time"}),a("td",{children:"dif"}),a("td",{children:"dea"}),a("td",{children:"macd"}),a("td",{children:"price"}),a("td",{children:"avg"}),a("td",{children:"avDif"})]})}),a("tbody",{children:c==null?void 0:c.map(e=>h("tr",{children:[a("td",{className:"time",children:e.time}),a("td",{className:r({down:e.difDirection==="down",up:e.difDirection==="up",max:e.dif===M,min:e.dif===g}),children:e.dif}),a("td",{className:r({down:e.deaDirection==="down",up:e.deaDirection==="up"}),children:e.dea}),a("td",{children:e.macd}),a("td",{className:r({max:e.close===N,min:e.close===w,gtAva:e.close>e.avaPrice,ltAva:e.close<=e.avaPrice}),children:e.close}),a("td",{className:"avaPrice",children:e.avaPrice}),a("td",{className:"avaDiff",children:e.avaDiff})]},e.time))})]})};var k=({data:s})=>{const{state:d,dispatch:o}=C.exports.useContext(T);return a("div",{className:r({panel:!0,open:d.showMacdTable,pageMacdTable:!0}),onDoubleClick:()=>o({type:"setShowMacdTable",showMacdTable:!1}),children:a(j,{data:s})})};export{k as default};
